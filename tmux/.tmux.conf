# ==============================================================================
# GENERAL SETTINGS
# ==============================================================================

# Change prefix from C-b to C-a
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Quality of Life
set -g mouse on
set -g base-index 1                # Start windows at 1
setw -g pane-base-index 1          # Start panes at 1
set -g renumber-windows on         # Renumber windows when one is closed
set -g history-limit 10000         # Increase scrollback buffer

# IMPORTANT: Fix for your request
# Don't switch to another active session when current one is destroyed
set -g detach-on-destroy off

# Terminal & Colors
set -g default-terminal "tmux-256color"
set -as terminal-overrides ",xterm*:Tc"

# ==============================================================================
# KEYBINDINGS
# ==============================================================================

# Reload config
bind r source-file ~/.tmux.conf \; display "Config Reloaded!"

# Sessions
bind S new-session
bind X confirm-before -p "Kill session #S? (y/n)" kill-session
bind-key -n M-q kill-session       # Alt+q to kill
bind-key -n M-w choose-tree -s      # Alt+w to switch between sessions

# Splitting Panes (using current path)
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Movement (Vim-style)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resizing Panes
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Quick Session Switching (Alt + Number)
bind-key -n M-1 switch-client -t 1
bind-key -n M-2 switch-client -t 2
bind-key -n M-3 switch-client -t 3
bind-key -n M-4 switch-client -t 4
bind-key -n M-5 switch-client -t 5

# ==============================================================================
# APPEARANCE
# ==============================================================================

set -g status-style bg=default     # Transparent background
set -g status-left-length 30
set -g status-left "#[fg=green]Session: #S #[default]"
set -g status-right "#[fg=cyan]%H:%M #[fg=yellow]%d-%b-%y"

# Highlight active window
setw -g window-status-current-style fg=black,bg=white
